---
import { Icon } from "astro-icon/components";
import { technologies, type Size } from "../../constants/Technologies";

const iconClasses : Record<Size, string> = {
  small : 'h-4 w-4 md:h-10 md:w-10',
  medium: 'h-7 w-7 md:h-16 md:w-16',
  big: 'h-10 w-10 md:h-24 md:w-24'
}

const iconSpan : Record<Size, string> = {
  small: 'col-span-3',
  medium: 'col-span-4',
  big: 'col-span-6',
}
---

<ul
  id="about-me-technologies"
  data-dont-animate
  class="not-prose grid grid-cols-12 gap-1 py-4 sm:gap-2"
>
  {
    Object.values(technologies).map((tech) => (
      <li class={`flex flex-col items-center gap-3 rounded-custom-sm bg-dark px-4 py-2 text-sm sm:py-3 md:rounded-custom-xl md:px-5 md:py-4 md:text-base ${iconSpan[tech.size]}`}>
        <Icon name={tech.icon} class={iconClasses[tech.size]} />
        {tech.name}
      </li>
    ))
  }
</ul>

<script>
  import gsap from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  const ul = document.getElementById("about-me-technologies");
  const lis = ul!.children;

  gsap.from(lis, {
    scrollTrigger: {
      trigger: ul,
      start: "top 70%"
    },
    y: (idx) => [-30, 30, 0, 0, 30, -30, 0, 0][idx % 8],
    x: (idx) => [0, 0, 30, -30, 0, 0, -30, 30][idx % 8],
    opacity: 0,
    ease: "elastic.out(1, 0.5)",
    duration: 2,
    scale: 0.7,
    stagger: 0.05
  });
</script>
